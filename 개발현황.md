# 개발 현황 - CS AI 에이전트 프로젝트

**프로젝트명**: 투비네트웍스 글로벌 FAQ 자동 응답 시스템  
**생성일**: 2025-09-30  
**최종 업데이트**: 2025-10-02 15:20, Claude 업데이트  
**버전**: 2.3

---

## 📋 목차

1. [프로젝트 개요](#프로젝트-개요)
2. [기술 스택 선정](#기술-스택-선정)
3. [개발 계획 및 Work Phase](#개발-계획-및-work-phase)
4. [현재 작업 상태](#현재-작업-상태)
5. [완료된 작업 목록](#완료된-작업-목록)
6. [다음 단계](#다음-단계)

---

## 프로젝트 개요

### 목표
CS 사원의 수동 FAQ 응대를 AI 기반 자동 응답 시스템으로 전환

### 핵심 구조
```
[FAQ 수집] → [AI 에이전트 분석] → [답변 생성] 
  → [CS 검수] → [판매 채널 등록]
```

### 기대 효과
| 지표 | 현재 | 목표 | 개선 |
|------|------|------|------|
| 응답 시간 | 2시간 | 30분 | 75% ↓ |
| 처리량 | 30건/일 | 300건/일 | 10배 ↑ |
| CS 작업 | 100% | 20% | 80% ↓ |

---

## 기술 스택 선정

### 전체 아키텍처

```
질문 분석: Sentence-BERT + spaCy (15-20ms, $0)
    ↓
벡터 검색: Weaviate (50ms, $0)
    ↓
데이터 조회: MongoDB (10ms, $0)
    ↓
신뢰도 평가: Python 로직 (5ms, $0)
    ↓
답변 생성: Claude Sonnet 4 (2500ms, $45/월)
    ↓
CS 검수 UI: Next.js + shadcn/ui
```

### 선정 근거

#### 1. Vector DB: Weaviate + MongoDB

**핵심**: Vector DB와 NoSQL은 서로 대체재가 아닌 **보완재**

**Weaviate (벡터 검색)**:
- 의미 검색 (Semantic Search)
- 하이브리드 검색 (BM25 + Vector)
- FAQ ID 반환

**MongoDB (데이터 저장)**:
- 실제 FAQ 내용 저장
- 제품 스펙, 고객 정보 저장
- 가변 스키마 지원

**작동 흐름**:
```
1. Weaviate에서 유사 FAQ ID 검색 → [123, 456, 789]
2. MongoDB에서 해당 FAQ 실제 내용 조회
3. Claude에게 전달하여 답변 생성
```

#### 2. 질문 분석: Sentence-BERT + spaCy

| 기능 | Sentence-BERT | spaCy |
|------|---------------|-------|
| 의미 이해 | ✅ | ❌ |
| 키워드 추출 | ❌ | ✅ |
| 제품 코드 인식 | ❌ | ✅ |
| 처리 시간 | 5-10ms | 10ms |

**선정 이유**:
- 상호 보완적
- 매우 빠름 (병렬 처리 15-20ms)
- 무료 (오픈소스)
- GPU 활용 (RTX 3050)
- 파인튜닝 가능

#### 3. 답변 생성: Claude Sonnet 4

**선정 이유**:
- 한국어 성능 우수
- 긴 컨텍스트 지원 (200K 토큰)
- MCP 프로토콜 지원
- 안정적인 API

---

## 개발 계획 및 Work Phase

### 전체 일정 (9주)

```
Phase 0: 요구사항 & 설계  [====✅====] 2025-09-23 ~ 09-30 (1주) 완료
Phase 1: 인프라 구축      [====✅====] 2025-10-01 (1일) 완료
Phase 2: 데이터 준비      [====✅====] 2025-10-01 ~ 10-02 (2일) 완료
Phase 3: AI 코어 개발     [===🔄=====] 2025-10-02 ~ 11-03 (4주) 진행 중
Phase 4: CS UI 개발       [=========] 2025-11-04 ~ 11-17 (2주) 예정
Phase 5: 통합 테스트      [=========] 2025-11-18 ~ 11-24 (1주) 예정
Phase 6: 프로덕션 배포    [=========] 2025-11-25 ~ 12-06 (2주) 예정

범례: ✅ 완료  🔄 진행 중  [ ] 예정
```

### 마일스톤

| 마일스톤 | 날짜 | 주요 산출물 | 상태 |
|----------|------|-------------|------|
| M0: 설계 완료 | 2025-09-30 | 아키텍처 문서, 기술 스택 선정 | ✅ |
| M1: 개발 환경 준비 | 2025-10-01 | Docker 환경, 프로젝트 구조 | ✅ |
| M2: 데이터 준비 완료 | 2025-10-02 | MongoDB/Weaviate 초기 데이터 | ✅ |
| M3: AI 코어 완성 | 2025-11-03 | FastAPI 백엔드, 모든 API | 🔄 |
| M4: UI 개발 완료 | 2025-11-17 | Next.js 프론트엔드 | 📅 |
| M5: 테스트 완료 | 2025-11-24 | 테스트 보고서, 버그 수정 | 📅 |
| M6: 프로덕션 배포 | 2025-12-06 | 운영 시스템 가동 | 📅 |

---

## 현재 작업 상태

### Phase 진행률

| Phase | 상태 | 진행률 | 기간 | 소요 시간 |
|-------|------|--------|------|-----------|
| Phase 0: 설계 | ✅ | 100% | 2025-09-23 ~ 09-30 | 7일 |
| Phase 1: 인프라 | ✅ | 100% | 2025-10-01 | 1일 |
| Phase 2: 데이터 | ✅ | 100% | 2025-10-01 ~ 10-02 | 2일 |
| **Phase 3: AI 코어** | **🔄** | **20%** | **2025-10-02 ~ 11-03** | **진행 중** |
| Phase 4: UI | 📅 | 0% | 2025-11-04 ~ 11-17 | 예정 |
| Phase 5: 테스트 | 📅 | 0% | 2025-11-18 ~ 11-24 | 예정 |
| Phase 6: 배포 | 📅 | 0% | 2025-11-25 ~ 12-06 | 예정 |

**전체 진행률**: 52% (Phase 0~2 완료, Phase 3 진행 중 20%)

---

## 완료된 작업 목록

### ✅ Phase 0: 요구사항 & 설계 (2025-09-23 ~ 09-30)

**문서 작성**:
- [x] `docs/01_프로젝트_개요.md`
- [x] `docs/02_시스템_아키텍처.md`
- [x] `docs/03_기술스택_질문분석.md`
- [x] `docs/04_기술스택_벡터DB.md` (2025-10-02 업데이트)
- [x] `docs/05_기술스택_NoSQL.md` (2025-10-02 업데이트)
- [x] `docs/09_개발_계획.md`
- [x] `presentation/기술팀_공유_15분.md`
- [x] `README.md` (2025-10-02 업데이트)
- [x] `개발현황.md` (이 파일, 2025-10-02 업데이트)

**프로젝트 구조**:
- [x] 폴더 구조 설계 및 생성
- [x] Python 기본 파일 작성
- [x] requirements.txt 작성
- [x] Docker Compose 설정
- [x] .env.example 작성

---

### ✅ Phase 1: 인프라 구축 (2025-10-01)

**Docker 환경**:
- [x] WSL 2 설치 및 활성화
- [x] Docker Desktop 설치
- [x] docker-compose.yml 작성
- [x] Weaviate 컨테이너 실행 (포트 8081)
- [x] MongoDB 컨테이너 실행 (포트 27017)
- [x] Redis 컨테이너 실행 (포트 6379)
- [x] Mongo Express 실행 (포트 8082)

**Python 환경**:
- [x] Python 3.11.9 가상환경 구성
- [x] requirements.txt 패키지 설치
- [x] GPU 환경 설정 (RTX 3050, CUDA 12.6)
- [x] spaCy 한국어 모델 다운로드
- [x] Sentence-BERT 모델 테스트

**검증**:
- [x] 모든 Docker 서비스 정상 작동 확인
- [x] GPU 인식 확인 (`torch.cuda.is_available() = True`)
- [x] Python 패키지 임포트 테스트 통과

**소요 시간**: 약 2시간

---

### ✅ Phase 2: 데이터 준비 (2025-10-01 ~ 10-02)

**제품 데이터**:
- [x] Keychron 제품 160개 MySQL에서 CSV 추출
- [x] CSV → JSON 변환 스크립트 작성
- [x] products_keychron.csv 생성 (38개 컬럼)
- [x] data/raw/README.md 작성 (데이터 설명)

**FAQ 데이터**:
- [x] 네이버 Commerce API 연동 (Spring Boot)
- [x] 실제 고객 문의 100건 수집
- [x] MySQL customer_inquiry 테이블 설계
- [x] FAQ 데이터 CSV 생성 (faq_data_sample.csv)

**데이터베이스 스키마**:
- [x] MongoDB 4개 컬렉션 설계
  - products: 제품 정보
  - faqs: FAQ 정보
  - customers: 고객 정보
  - logs: 처리 로그
- [x] MySQL FAQ 테이블 설계

**임포트 스크립트**:
- [x] backend/scripts/import_data.py 작성 완료
  - CSV/JSON 모두 지원
  - MongoDB 자동 인덱싱
  - Upsert 방식 중복 방지
  - 진행 상황 로깅

**소요 시간**: 약 7시간

---

### 🔄 Phase 3: AI 코어 개발 (2025-10-02 ~ 11-03, 진행 중)

#### 완료된 작업 (20%)

**데이터 임포트 및 벡터화** (2025-10-02 15:18 완료):
- [x] MongoDB FAQ 데이터 1,581건 임포트
- [x] Weaviate 스키마 생성 (FAQ, Product 클래스)
- [x] Weaviate FAQ 임베딩 1,581개 생성 및 업로드
  - GPU 활용 (RTX 3050)
  - 임베딩 생성 시간: 11.7초
  - 업로드 시간: 17초
  - 실패: 0건

**스크립트 준비**:
- [x] import_data.py 통합 임포트 스크립트 완성
- [x] setup_weaviate.py 스키마 정의 완료
- [x] import_to_weaviate.py 임베딩 생성 스크립트 완성

**문서 업데이트**:
- [x] docs/04_기술스택_벡터DB.md 최신화
- [x] docs/05_기술스택_NoSQL.md 최신화
- [x] README.md 현재 상황 반영
- [x] 개발현황.md 전체 리뷰 및 업데이트
- [x] devlog/2025-10-02_Phase2_완료.md 작성

#### 다음 작업 (진행 예정)

**1주차 (2025-10-02 ~ 10-08): 데이터 임포트 및 벡터 검색**
- [ ] MongoDB 제품 데이터 160개 임포트 ⭐ 즉시 진행
- [ ] MongoDB FAQ 데이터 100건 임포트
- [ ] Weaviate FAQ 임베딩 생성 및 업로드
- [ ] 벡터 검색 테스트 및 검증
- [ ] QuestionAnalyzer 클래스 구현
  - Sentence-BERT + spaCy 통합
  - 질문 카테고리 분류
  - 키워드 추출
  - 복잡도 점수 계산

**2주차 (2025-10-09 ~ 10-15): 서비스 레이어 구현**
- [ ] WeaviateService 클래스 구현
  - 하이브리드 검색
  - 필터링 (브랜드, 카테고리)
  - 유사도 점수 반환
- [ ] MongoDBService 클래스 구현
  - 제품 정보 조회
  - FAQ 조회
  - 고객 정보 조회
  - 로그 저장
- [ ] ConfidenceScorer 클래스 구현
  - 복잡도 판단 알고리즘
  - 신뢰도 점수 계산
  - 답변 유보 로직

**3주차 (2025-10-16 ~ 10-22): Claude API 통합**
- [ ] ClaudeService 클래스 구현
  - MCP 서버 구성
  - 프롬프트 템플릿 작성
  - API 호출 및 에러 핸들링
- [ ] AnswerGenerator 클래스 구현
  - Claude API 통합
  - 답변 생성 로직
  - 품질 검증

**4주차 (2025-10-23 ~ 11-03): FastAPI 엔드포인트**
- [ ] /api/health: 헬스체크
- [ ] /api/analyze: 질문 분석
- [ ] /api/search: 벡터 검색
- [ ] /api/answer: 답변 생성
- [ ] /api/review: CS 검수
- [ ] /api/stats: 통계
- [ ] 단위 테스트 90% 이상

---

## 다음 단계

### 즉시 진행 가능한 작업 ⭐

#### 1. MongoDB 데이터 임포트 (최우선)

```bash
# 가상환경 활성화
cd C:\workspace\CSAI\backend
venv\Scripts\activate

# Docker MongoDB 실행 확인
docker ps | findstr mongodb

# 제품 데이터 임포트 (160개)
cd scripts
python import_data.py --type products --source ../../data/raw/products_keychron.csv --brand KEYCHRON

# FAQ 데이터 임포트 (100건)
python import_data.py --type faqs --source ../../data/raw/faq_data_sample.csv

# MongoDB Express에서 확인
# http://localhost:8082
```

**예상 결과**:
- products 컬렉션: 160개 문서
- faqs 컬렉션: 100개 문서
- 자동 인덱스 생성 완료

#### 2. Weaviate 임베딩 생성 및 업로드

```bash
# FAQ 임베딩 생성 및 Weaviate 업로드
python import_to_weaviate.py --type faqs --brand KEYCHRON --batch-size 100

# 예상 소요 시간: 약 2분
# - FAQ 100건 텍스트 준비
# - Sentence-BERT 임베딩 생성 (GPU)
# - Weaviate 배치 업로드
```

**예상 결과**:
- Weaviate FAQ 컬렉션 생성
- 100개 벡터 업로드 완료
- 검색 준비 완료

#### 3. QuestionAnalyzer 구현

**파일**: `backend/app/core/question_analyzer.py`

```python
# 2025-10-02, Claude 작성

from typing import Dict, List
import spacy
from sentence_transformers import SentenceTransformer

class QuestionAnalyzer:
    """
    고객 질문 분석기
    
    Sentence-BERT + spaCy를 사용하여:
    - 질문 카테고리 분류
    - 키워드 추출 (제품명, 모델명)
    - 복잡도 점수 계산
    """
    
    def __init__(self):
        # spaCy 한국어 모델
        self.nlp = spacy.load("ko_core_news_lg")
        
        # Sentence-BERT 모델
        self.embedding_model = SentenceTransformer(
            "jhgan/ko-sroberta-multitask"
        )
    
    def analyze(self, question: str) -> Dict:
        """
        질문 분석
        
        Args:
            question: 고객 질문
        
        Returns:
            {
                "category": "기술지원",
                "keywords": ["K10", "블루투스"],
                "complexity_score": 0.75,
                "embedding": [0.1, 0.2, ...]
            }
        """
        # 구현 예정
        pass
```

---

## 빠른 참조

### Docker 서비스 포트

- **Weaviate**: http://localhost:8081
- **MongoDB**: http://localhost:27017
- **Redis**: http://localhost:6379
- **Mongo Express**: http://localhost:8082 (MongoDB GUI)

### 주요 명령어

#### Docker 서비스 관리
```bash
# 서비스 시작
cd C:\workspace\CSAI\docker
docker-compose up -d

# 서비스 상태 확인
docker-compose ps

# 로그 확인
docker-compose logs -f weaviate
docker-compose logs -f mongodb

# 서비스 중지
docker-compose down
```

#### Python 가상환경
```bash
# 가상환경 활성화 (Windows)
cd C:\workspace\CSAI\backend
venv\Scripts\activate

# GPU 확인
python -c "import torch; print('CUDA:', torch.cuda.is_available())"

# FastAPI 서버 실행
python main.py
```

---

## 프로젝트 통계

### 개발 환경
- **OS**: Windows 11 Pro 64bit
- **Python**: 3.11.9
- **Docker**: Desktop (WSL 2 백엔드)
- **GPU**: NVIDIA GeForce RTX 3050 (CUDA 12.6)

### 데이터 현황 (2025-10-02 15:20 기준)
- **제품 데이터**: 160개 준비 완료
- **FAQ 데이터**: 1,581건 (MongoDB 임포트 완료)
- **MongoDB**: 1,581건 FAQ 저장 완료
- **Weaviate**: 1,581개 FAQ 벡터 임베딩 완료

### 비용 분석
- **개발 환경**: $0/월 (로컬 Docker)
- **Claude API**: $45/월 (예상, 900건 기준)
- **총 운영 비용**: $45/월

---

## 작업 시간 분석

### 2025-09-23 ~ 09-30 (Phase 0)
- 전체 작업 시간: 약 14시간
- 설계 및 문서 작성
- 기술 스택 조사 및 선정

### 2025-10-01 (Phase 1)
- 전체 작업 시간: 약 2시간
- Docker 환경 구축
- Python 환경 설정
- GPU 설정

### 2025-10-01 ~ 10-02 (Phase 2)
- 전체 작업 시간: 약 7시간
- 제품 데이터 준비
- FAQ 수집 (네이버 API)
- 임포트 스크립트 작성

### 2025-10-02 (Phase 3 시작)
- 현재까지 작업 시간: 약 4시간
- MongoDB FAQ 1,581건 임포트
- Weaviate 벡터 DB 구축 완료
- Docker 환경 트러블슈팅
- 문서 최신화

**총 누적 시간**: 약 27시간

---

## 위험 관리

| 위험 | 확률 | 영향도 | 대응 방안 | 상태 |
|------|------|--------|-----------|------|
| 개발 지연 | 낮 | 중 | 2주 버퍼 확보 | ✅ 해결 (예상보다 빠름) |
| 기술 학습 곡선 | 낮 | 중 | 프로토타입 제작 | ✅ 해결 |
| 데이터 부족 | 낮 | 중 | CS 팀 협업 | ✅ 해결 (100건 확보) |
| Claude API 장애 | 낮 | 높 | 재시도 로직, 폴백 | 📅 Phase 3 구현 예정 |
| 성능 이슈 | 중 | 중 | 캐싱, 최적화 | 📅 Phase 3 구현 예정 |

---

## 프로젝트 관리

### 매주 업데이트
- **매주 금요일**: 진행 상황 보고
- **블로커 발생 시**: 즉시 보고 및 해결

### Notion 연동
이 문서는 Notion에 업로드되어 프로젝트 관리에 사용됩니다.

---

**문서 버전**: 2.3  
**관리자**: 개발팀  
**최종 업데이트**: 2025-10-02 15:20, Claude  
**다음 업데이트**: QuestionAnalyzer 구현 완료 시
